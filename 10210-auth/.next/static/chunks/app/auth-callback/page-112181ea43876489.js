(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95],{27016:(e,t,a)=>{"use strict";a.d(t,{PromisifiedAuthProvider:()=>u,d:()=>l});var r=a(51088),n=a(38572),s=a(35583),i=a(12115);let o=i.createContext(null);function u(e){let{authPromise:t,children:a}=e;return i.createElement(o.Provider,{value:t},a)}function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,s.useRouter)(),a=i.useContext(o),u=a;return(a&&"then"in a&&(u=i.use(a)),"undefined"!=typeof window)?(0,r.As)({...u,...e}):t?(0,r.As)(e):(0,n.hP)({...u,...e})}},35583:(e,t,a)=>{e.exports=a(63950)},38572:(e,t,a)=>{"use strict";a.d(t,{T5:()=>n.T5,hP:()=>r.hP,nO:()=>n.nO,yC:()=>s}),a(84089);var r=a(15359),n=a(7827);function s(e,t,a){let n=t.path||(null==a?void 0:a.path);return"path"===(t.routing||(null==a?void 0:a.routing)||"path")?n?{...a,...t,routing:"path"}:r.sb.throw((0,r.kd)(e)):t.path?r.sb.throw((0,r.s7)(e)):{...a,...t,path:void 0}}},42236:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var r=a(95155),n=a(12115),s=a(51088),i=a(27016),o=a(35695);function u(){let{user:e,isLoaded:t}=(0,s.Jd)(),{getToken:a}=(0,i.d)(),u=(0,o.useRouter)();return(0,n.useEffect)(()=>{(async()=>{if(t)if(e){var r,n;let t=await a(),s={id:e.id,email:(null==(r=e.primaryEmailAddress)?void 0:r.emailAddress)||"",firstName:e.firstName||"",lastName:e.lastName||"",fullName:e.fullName||"",username:e.username||e.firstName||"User",imageUrl:e.imageUrl||"",phone:(null==(n=e.primaryPhoneNumber)?void 0:n.phoneNumber)||"",createdAt:e.createdAt,token:t,isLoggedIn:!0,lastUpdated:new Date().toISOString()},i={...s,isLoggedIn:!0,lastUpdated:new Date().toISOString()};localStorage.setItem("cuwhapp_user_cache",JSON.stringify(i)),localStorage.setItem("whatsapp_agent_user",JSON.stringify(i));try{let e=window.location.hostname,a=await fetch("".concat("https://app.cuwapp.com","/api/users/sync"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({user_id:s.id,email:s.email,name:s.fullName,metadata:{firstName:s.firstName,lastName:s.lastName,username:s.username,phone:s.phone}})});if(a.ok){let e=await a.json();localStorage.setItem("user_subscription",JSON.stringify(e))}}catch(e){console.error("Failed to sync user data:",e)}let o=new URLSearchParams({userId:s.id,email:s.email,username:s.username,token:s.token||"",isNewLogin:"true"}),u=window.location.hostname;window.location.href="".concat("https://app.cuwapp.com","?").concat(o.toString())}else u.push("/sign-in")})()},[t,e,a,u]),(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 to-green-100",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Authenticating..."})]})})}},63950:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useRouter",{enumerable:!0,get:function(){return s}});let r=a(12115),n=a(70901);function s(){return(0,r.useContext)(n.RouterContext)}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},70901:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return r}});let r=a(88229)._(a(12115)).default.createContext(null)},75522:(e,t,a)=>{Promise.resolve().then(a.bind(a,42236))}},e=>{var t=t=>e(e.s=t);e.O(0,[542,441,684,358],()=>t(75522)),_N_E=e.O()}]);